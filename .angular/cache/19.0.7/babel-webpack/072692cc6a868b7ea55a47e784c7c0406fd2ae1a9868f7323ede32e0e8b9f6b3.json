{"ast":null,"code":"import { FormsModule } from \"@angular/forms\";\nimport { MatIconModule } from \"@angular/material/icon\";\nimport { MatSelectModule } from \"@angular/material/select\";\nimport BasketTool from \"../../shared/basket/basket-tool\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/book.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/material/select\";\nlet AppToolbar = /*#__PURE__*/(() => {\n  class AppToolbar {\n    bookService;\n    router;\n    activatedRoute;\n    search = \"\";\n    sortField = \"default\";\n    sortOrder = \"default\";\n    constructor(bookService, router, activatedRoute) {\n      this.bookService = bookService;\n      this.router = router;\n      this.activatedRoute = activatedRoute;\n    }\n    ngOnInit() {\n      this.activatedRoute.queryParams.subscribe(params => {\n        if (params[\"search\"]) {\n          this.search = params[\"search\"];\n        }\n        if (params[\"sortField\"]) {\n          this.sortField = params[\"sortField\"];\n        }\n        if (params[\"sortOrder\"]) {\n          this.sortOrder = params[\"sortOrder\"];\n        }\n        this.bookService.searchBooks(this.search);\n        this.bookService.onSort(this.sortField, this.sortOrder);\n      });\n    }\n    onSearch() {\n      this.router.navigate([], {\n        relativeTo: this.activatedRoute,\n        queryParams: {\n          search: this.search\n        },\n        queryParamsHandling: \"merge\"\n      });\n      this.bookService.searchBooks(this.search);\n    }\n    onFieldChange(field) {\n      this.sortField = field;\n      this.router.navigate([], {\n        relativeTo: this.activatedRoute,\n        queryParams: {\n          sortField: this.sortField,\n          sortOrder: this.sortOrder,\n          search: this.search\n        },\n        queryParamsHandling: \"merge\"\n      });\n      this.bookService.onSort(this.sortField, this.sortOrder);\n    }\n    onOrderChange(order) {\n      this.sortOrder = order;\n      this.router.navigate([], {\n        relativeTo: this.activatedRoute,\n        queryParams: {\n          sortField: this.sortField,\n          sortOrder: this.sortOrder,\n          search: this.search\n        },\n        queryParamsHandling: \"merge\"\n      });\n      this.bookService.onSort(this.sortField, this.sortOrder);\n    }\n    resetFilters() {\n      this.search = \"\";\n      this.sortField = \"default\";\n      this.sortOrder = \"default\";\n      this.router.navigate([], {\n        relativeTo: this.activatedRoute,\n        queryParams: {\n          search: this.search,\n          sortField: this.sortField,\n          sortOrder: this.sortOrder\n        },\n        queryParamsHandling: \"merge\"\n      });\n      this.bookService.searchBooks(this.search);\n      this.bookService.onSort(this.sortField, this.sortOrder);\n    }\n    static ɵfac = function AppToolbar_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || AppToolbar)(i0.ɵɵdirectiveInject(i1.BookService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AppToolbar,\n      selectors: [[\"app-toolbar\"]],\n      decls: 16,\n      vars: 3,\n      consts: [[1, \"Toolbar-container\"], [\"type\", \"text\", \"placeholder\", \"Search\", 1, \"Search-input\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [1, \"Toolbar-select\"], [\"placeholder\", \"Select sort field\", 3, \"ngModelChange\", \"selectionChange\", \"ngModel\"], [\"value\", \"title\"], [\"value\", \"price\"], [\"placeholder\", \"Select sort order\", 3, \"ngModelChange\", \"selectionChange\", \"ngModel\"], [\"value\", \"asc\"], [\"value\", \"desc\"], [1, \"reset-button\", 3, \"click\"]],\n      template: function AppToolbar_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"input\", 1);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function AppToolbar_Template_input_ngModelChange_1_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.search, $event) || (ctx.search = $event);\n            return $event;\n          });\n          i0.ɵɵlistener(\"input\", function AppToolbar_Template_input_input_1_listener() {\n            return ctx.onSearch();\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"div\", 2)(3, \"mat-select\", 3);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function AppToolbar_Template_mat_select_ngModelChange_3_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.sortField, $event) || (ctx.sortField = $event);\n            return $event;\n          });\n          i0.ɵɵlistener(\"selectionChange\", function AppToolbar_Template_mat_select_selectionChange_3_listener($event) {\n            return ctx.onFieldChange($event.value);\n          });\n          i0.ɵɵelementStart(4, \"mat-option\", 4);\n          i0.ɵɵtext(5, \"Sort by title\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"mat-option\", 5);\n          i0.ɵɵtext(7, \"Sort by price\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(8, \"mat-select\", 6);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function AppToolbar_Template_mat_select_ngModelChange_8_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.sortOrder, $event) || (ctx.sortOrder = $event);\n            return $event;\n          });\n          i0.ɵɵlistener(\"selectionChange\", function AppToolbar_Template_mat_select_selectionChange_8_listener($event) {\n            return ctx.onOrderChange($event.value);\n          });\n          i0.ɵɵelementStart(9, \"mat-option\", 7);\n          i0.ɵɵtext(10, \"Ascending\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"mat-option\", 8);\n          i0.ɵɵtext(12, \"Descending\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(13, \"button\", 9);\n          i0.ɵɵlistener(\"click\", function AppToolbar_Template_button_click_13_listener() {\n            return ctx.resetFilters();\n          });\n          i0.ɵɵtext(14, \"Reset Filters\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(15, \"app-basket-tool\");\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance();\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.search);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.sortField);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.sortOrder);\n        }\n      },\n      dependencies: [FormsModule, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, MatIconModule, MatSelectModule, i4.MatSelect, i4.MatOption, BasketTool],\n      styles: [\".Toolbar-container[_ngcontent-%COMP%]{position:relative;margin:2rem 5rem;display:flex}.Search-input[_ngcontent-%COMP%]{width:20%;padding:10px 15px;font-size:16px;border:1px solid #ccc;border-radius:25px;outline:none;transition:border-color .3s}.Search-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 5px #4c00ff80}.Search-input[_ngcontent-%COMP%]::placeholder{color:#aaa;font-style:italic}.Toolbar-select[_ngcontent-%COMP%]{margin-left:2rem;display:flex;gap:1rem}.Toolbar-select[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{width:200px;min-width:100px;max-width:150px}\"]\n    });\n  }\n  return AppToolbar;\n})();\nexport { AppToolbar as default };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}